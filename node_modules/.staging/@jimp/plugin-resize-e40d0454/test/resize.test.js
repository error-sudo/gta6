import { Jimp, mkJGD, hashForEach } from '@jimp/test-utils';
import configure from '@jimp/custom';

import resize from '../src';

const jimp = configure({ plugins: [resize] }, Jimp);

describe('Resize images', () => {
  const testImages = [
    {
      title: 'max contrast 8x8',
      src: jimp.read(
        mkJGD(
          '■■■■□□□□',
          '■■■■□□□□',
          '■■■■□□□□',
          '■■■■□□□□',
          '□□□□■■■■',
          '□□□□■■■■',
          '□□□□■■■■',
          '□□□□■■■■'
        )
      ),
      results: {
        'default 4x4': mkJGD('■■□□', '■■□□', '□□■■', '□□■■'),
        'NEAREST_NEIGHBOR 4x4': mkJGD('■■□□', '■■□□', '□□■■', '□□■■'),
        'BILINEAR 4x4': mkJGD('■■□□', '■■□□', '□□■■', '□□■■'),
        'BICUBIC 4x4': {
          width: 4,
          height: 4,
          data: [
            0x000000ff,
            0x000000ff,
            0xbfbfbfff,
            0xffffffff,
            0x000000ff,
            0x000000ff,
            0xbfbfbfff,
            0xffffffff,
            0xbfbfbfff,
            0xbfbfbfff,
            0x5f5f5fff,
            0x404040ff,
            0xffffffff,
            0xffffffff,
            0x404040ff,
            0x000000ff
          ]
        },
        'HERMITE 4x4': {
          width: 4,
          height: 4,
          data: [
            0x000000ff,
            0x000000ff,
            0xc0c0c0ff,
            0xffffffff,
            0x000000ff,
            0x000000ff,
            0xc0c0c0ff,
            0xffffffff,
            0xc0c0c0ff,
            0xc0c0c0ff,
            0x606060ff,
            0x404040ff,
            0xffffffff,
            0xffffffff,
            0x404040ff,
            0x000000ff
          ]
        },
        'BEZIER 4x4': {
          width: 4,
          height: 4,
          data: [
            0x000000ff,
            0x000000ff,
            0xc0c0c0ff,
            0xffffffff,
            0x000000ff,
            0x000000ff,
            0xc0c0c0ff,
            0xffffffff,
            0xc0c0c0ff,
            0xc0c0c0ff,
            0x606060ff,
            0x404040ff,
            0xffffffff,
            0xffffffff,
            0x404040ff,
            0x000000ff
          ]
        },
        'default 5x2': mkJGD('■■▦□□', '□□▦■■'),
        'NEAREST_NEIGHBOR 5x2': mkJGD('■■■□□', '□□□■■')